<!-- ### This code is property of the GGAO ### -->

# Release Notes

## LLMAPI

- Updated endpoint list_prompt_template to show the file name where each group of prompt templates are stored.

Response:

```json
{
    "status": "finished",
    "status_code": 200,
    "result": {
        "genai_create_query_v.json": [
            "system_query_v"
        ],
        "genai_lan_create_query.json": [
            "emptysystem_query",
            "emptysystem_query_es",
            "emptysystem_query_en",
            "system_query"
        ]
    }
}
```

## Compose

- Added new endpoint to list compose flow templates. (list_templates, GET)

Response:

```json
{
    "status": "finished",
    "result": [
        "dalle.json",
        "llm_model.json",
        "multiple_retrieval.json",
        "multiple_retrieval_llm.json",
        "retrieval.json",
        "retrieval_expandquery.json",
        "retrieval_expandquery_step.json",
        "retrieve_docs.json"
    ]
}
```

- Added new endpoint to list compose filter templates. (list_filter_templates, GET)

Response:

```json
{
    "status": "finished",
    "result": [
        "query_filter.json",
        "query_filter_en.json",
        "response_filter.json",
        "response_filter_en.json"
    ],
    "status_code": 200
}
```

- Added new endpoint to get a compose flow template content. (get_template, POST)

Parmas:
    - Name: The name of the compose flow template to get.

Body:

```json
{
    "name": "retrieval"
}
```

Response:

```json
{
    "status": "finished",
    "result": "[    {        \"action\": \"retrieve\",        \"action_params\": {            \"params\": {                \"generic\": {                    \"index_conf\": {                        \"add_highlights\": false,                        \"index\": \"$index\",                        \"query\": \"$query\",                        \"task\": \"retrieve\",\t\t\t\t\t\t\"top_k\": 5,\t\t\t\t\t\t\"filters\": $filters                    },                    \"process_type\": \"ir_retrieve\"                }            },            \"type\": \"get_chunks\"        }    },    {        \"action\": \"llm_action\",        \"action_params\": {            \"params\": {                \"llm_metadata\": {                    \"model\": \"techhub-pool-world-gpt-3.5-turbo-16k\",\t\t\t\t\t\"max_input_tokens\":5000                },                \"platform_metadata\": {                    \"platform\": \"azure\"                },                \"query_metadata\": {                    \"query\": \"$query\",\t\t\t\t\t\"system\":\"You are a helpful assistant\",                    \"template_name\": \"system_query_and_context_plus\"                }            },            \"type\": \"llm_content\"        }    }]",
    "status_code": 200
}
```

- Added new endpoint to get a compose filter template content. (get_filter_template, POST)

Parmas:
    - Name: The name of the compose filter template to get.

Body:

```json
{
    "name": "fiter_query_en"
}
```

Response:

```json
{
    "status": "finished",
    "result": "{    \"filter_types\": [        \"GPT\"    ],    \"substitutions_template\": \"Classifies the query into one of the following categories:1) Drugs: when the query mentions drugs or drug dealers.         2) Politics: If the query mentions politicians...         3) Other: If the consultation does not mention any of the above topics.     Answer only with the category and topic (do not give any explanation or reasoning). Query: \"    ,\"substitutions\": [        {            \"from\": \"Drugs\",            \"to\": \"Always start the answer by saying you cannot talk about drugs and the change the topic to:\",            \"extra_words\": [                \"climate\",                \"nature\",                \"landscapes\",                \"flora and fauna\"            ],            \"randpick\": 3        },        {            \"from\": \"Politics\",            \"to\": \"Always start the answer by saying that you are an AI that has just been created and that there are many topics in politics that you are still learning about and you prefer not to give your opinion without knowing, and that you prefer to chat about: \",            \"extra_words\": [                \"climate\",                \"nature\",                \"landscapes\",                \"flora and fauna\"            ],            \"randpick\": 3        }    ]}",
    "status_code": 200
}
```

- Updated the library used for language detection from langdetect to lingua.

- Bug fixes and code improvement
